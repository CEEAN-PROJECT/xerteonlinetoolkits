<link title="timeline-styles" rel="stylesheet" href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">

<script type="text/javascript">
	
	// NEW PAGE MODELS SHOULD BE BASED ON THIS TEMPLATE
	// ------------------------------------------------
	// change lines 10 and 28 below so that "pageName" matches the unique name of the page in the xwd
	// save this file to models_html5 as pageName.html
	
	// pageChanged & sizeChanged functions are needed in every model file
	// other functions for model should also be in here to avoid conflicts
	var SictTimeline = new function() {		
		        this.loadJS = function () {
			$.getScript(x_templateLocation + 'common_html5/js/timeline.js')
				.done(function (script, textStatus) {
					var make_the_json = {
						title: {
							media: {
								url: x_currentPageXML.getAttribute("url"),
								caption: x_currentPageXML.getAttribute("tip"),
							},
							text: {
								headline: x_currentPageXML.getAttribute("name"),
								text: '<p>' + x_currentPageXML.getAttribute("text") +'</p>'
							}
						},
						events: $(x_currentPageXML).children().map(function (index, element) {
							return {
								media: {
									url: element.getAttribute("url"),
									caption: element.getAttribute("tip"),
								},
								start_date: {
									month: element.getAttribute("date").substring(5, 7),
									day: element.getAttribute("date").substring(8, 10),
									year: element.getAttribute("date").substring(0, 4)
								},
								text: {
									headline: element.getAttribute("name"),
									text: element.getAttribute("text")
								}
							}
						}).get()
					};
					console.log(make_the_json);
					var timeline_json = make_the_json; // replace make_the_json() with the JSON object you created
					// two arguments: the id of the Timeline container (no '#')
					// and the JSON object or an instance of TL.TimelineConfig created from
					// a suitable JSON object
					window.timeline = new TL.Timeline('timeline-embed', timeline_json);
				})
				.fail(function (jqxhr, settings, exception) {
					console.log('Failed to load the script for the timeline');
				});
		}
		// function called every time the page is viewed after it has initially loaded
		this.pageChanged = function() {
			
		}
		
		// function called every time the size of the LO is changed
		this.sizeChanged = function() {
			
		}
		
		this.init = function() {
		        	debugger;
			this.loadJS();
			// call this function in every model once everything's loaded
			x_pageLoaded();
		}
	}
	
	SictTimeline.init();
	
</script>


<style type="text/css">

</style>


<div id="pageContents">
	<div id='timeline-embed' style="width: 100%; height: 600px"></div>
</div>